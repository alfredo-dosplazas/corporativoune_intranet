{% load field_extras %}
{% load crispy_forms_field %}

{% if field.is_hidden %}
    {{ field }}
{% else %}
<div
    id="div_{{ field.auto_id }}"
    class="
        mb-4
        {% if wrapper_class %}{{ wrapper_class }}{% endif %}
        {% if field.css_classes %}{{ field.css_classes }}{% endif %}
    "
>

    {# ================= LABEL ================= #}
    {% if field.label and form_show_labels and not field|is_checkbox %}
        <label
            for="{{ field.id_for_label }}"
            class="label"
        >
            <span class="label-text {% if field.errors %}text-error{% endif %}">
                {{ field.label }}
                {% if field.field.required %}
                    <span class="text-error ml-1">*</span>
                {% endif %}
            </span>
        </label>
    {% endif %}

    {# ================= RADIO / CHECKBOX MULTIPLE ================= #}
    {% if field|is_checkboxselectmultiple or field|is_radioselect %}
        {% include "daisyui5/layout/radio_checkbox_select.html" %}

    {# ================= SINGLE CHECKBOX ================= #}
    {% elif field|is_checkbox %}
        <label class="flex items-center gap-3 cursor-pointer">
            {% if field.errors %}
                {% crispy_field field 'class' 'checkbox checkbox-error' %}
            {% else %}
                {% crispy_field field 'class' 'checkbox checkbox-primary' %}
            {% endif %}

            <span class="{% if field.errors %}text-error{% endif %}">
                {{ field.label }}
                {% if field.field.required %}
                    <span class="text-error ml-1">*</span>
                {% endif %}
            </span>
        </label>

    {# ================= FILE ================= #}
    {% elif field|is_file %}
        {% include "daisyui5/layout/field_file.html" %}

    {# ================= SELECT ================= #}
    {% elif field|is_select %}
        {% if field.errors %}
            {% crispy_field field 'class' 'w-full' %}
        {% else %}
            {% crispy_field field 'class' 'w-full' %}
        {% endif %}

    {# ================= TEXTAREA ================= #}
    {% elif field|is_textarea %}
        {% if field.errors %}
            {% crispy_field field 'class' 'textarea textarea-error w-full' %}
        {% else %}
            {% crispy_field field 'class' 'textarea w-full' %}
        {% endif %}

    {# ================= DEFAULT INPUT ================= #}
    {% else %}
        {% if field.errors %}
            {% crispy_field field 'class' 'input input-error w-full' %}
        {% else %}
            {% crispy_field field 'class' 'input w-full' %}
        {% endif %}
    {% endif %}

    {# ================= HELP + ERRORS ================= #}
    {% include "daisyui5/layout/help_text_and_errors.html" %}

</div>
{% endif %}