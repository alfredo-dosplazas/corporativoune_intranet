{% load crispy_forms_filters %}
{% load l10n %}

<div class="flex flex-col gap-2 {% if field_class %}{{ field_class }}{% endif %}" {% if flat_attrs %} {{ flat_attrs }}{% endif %}>

    {% for group, options, index in field|optgroups %}
        {% if group %}
            <p class="mb-2 text-sm font-medium text-base-content/70">
                {{ group }}
            </p>
        {% endif %}

        <div class="{% if inline_class %}flex flex-wrap gap-4{% else %}flex flex-col gap-2{% endif %}">
            {% for option in options %}
                <label
                        for="{{ option.attrs.id }}"
                        class="flex items-center gap-2 cursor-pointer select-none"
                >
                    <input
                            type="{{ option.type }}"
                            name="{{ field.html_name }}"
                            value="{{ option.value|unlocalize }}"
                            class="
                            checkbox
                            {% if field.errors %}checkbox-error{% else %}checkbox-primary{% endif %}
                        "
                            {% include "daisyui5/layout/attrs.html" with widget=option %}
                    >

                    <span class="text-sm">
                        {{ option.label|unlocalize }}
                    </span>
                </label>
            {% endfor %}
        </div>
    {% endfor %}

</div>
{# ================= ERRORES ================= #}
{% if field.errors %}
    {% if field.errors.field_id %}
        <div id="{{ field.errors.field_id }}_error" class="mt-2 text-error text-sm">
    {% else %}
        <div id="{{ field.auto_id }}_error" class="mt-2 text-error text-sm">
    {% endif %}
{% for error in field.errors %}
    <p>{{ error }}</p>
{% endfor %}
</div>
{% endif %}

{# ================= HELP TEXT ================= #}
{#{% include "daisyui5/layout/help_text.html" %}#}