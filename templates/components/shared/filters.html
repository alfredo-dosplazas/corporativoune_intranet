{% load crispy_forms_tags %}
<label for="filters-drawer" class="btn btn-sm btn-outline relative">
    <span class="icon-[mdi--filter] size-4"></span>
    Filtros

    {% for field in filter.form %}
        {% if field.value %}
            <span class="absolute -top-1 -right-1 w-2.5 h-2.5 bg-error rounded-full"></span>
        {% endif %}
    {% endfor %}
</label>

<div class="drawer drawer-end">
    <input id="filters-drawer" type="checkbox" class="drawer-toggle"/>

    <div class="drawer-content"></div>

    <div class="drawer-side">
        <label for="filters-drawer" class="drawer-overlay"></label>

        <form method="get"
              class="w-80 bg-base-100 min-h-full flex flex-col">

            <!-- HEADER -->
            <div class="p-4 border-b flex items-center justify-between">
                <h3 class="font-bold text-lg">
                    Filtros
                </h3>
                <label for="filters-drawer" class="btn btn-sm btn-ghost">âœ•</label>
            </div>

            <!-- CONTENIDO SCROLLABLE -->
            <div class="flex-1 overflow-y-auto p-4 space-y-4">
                {% for key, value in request.GET.items %}
                    {% if key != 'page' and key not in filter.form.fields %}
                        <input type="hidden" name="{{ key }}" value="{{ value }}">
                    {% endif %}
                {% endfor %}

                {% crispy filter.form %}
            </div>

            <!-- FOOTER -->
            <div class="p-4 border-t flex justify-between">
                <a href="?" class="btn btn-sm btn-ghost">
                    Limpiar
                </a>
                <button type="submit" class="btn btn-sm btn-primary">
                    Buscar
                </button>
            </div>

        </form>
    </div>
</div>